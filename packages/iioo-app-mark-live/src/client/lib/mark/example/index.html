<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div>
  <div id="root" class="inner clearfix"><div class="article-meta"><h1 class="title">ä»é›¶å¼€å§‹å†™Babelæ’ä»¶</h1><div class="eux-page-detail"><span><em>by.</em><!-- react-text: 6868 -->è‘±<!-- /react-text --></span><span>2017-12-6</span></div></div><article><p>åœ¨ç°ä»£Webå‰ç«¯å¼€å‘ä¸­ï¼Œç¦»ä¸å¼€JavaScript es6/7ï¼Œè€Œ ES6/7 ä¸­æœ€å¸¸ç”¨çš„è¯­æ³•ç¿»è¯‘å½“å± Babel äº†ã€‚</p><p>è¿™ç¯‡æ–‡ç« å°†å¸¦è¯»è€…ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰çš„Babelæ’ä»¶ã€‚</p><h2 id="babelæ˜¯ä»€ä¹ˆ"><a href="#babel%E6%98%AF%E4%BB%80%E4%B9%88" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 6876 -->Babelæ˜¯ä»€ä¹ˆ<!-- /react-text --></h2><p><!-- react-text: 6878 -->Babel ä½¿ç”¨ babylon è§£æ JavaScript ä»£ç ï¼Œå¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Treeï¼Œåæ–‡ç®€ç§° ASTï¼‰ã€‚ åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨<!-- /react-text --><code>babel-generator</code><!-- react-text: 6880 -->ï¼Œè¾“å…¥ä¸€ä¸ªåˆæ³•çš„ ASTï¼Œè¿˜åŸæˆ JavaScript ä»£ç <!-- /react-text --></p><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 434px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 22.5806%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/http%3A%2F%2Fobu9je6ng.bkt.clouddn.com%2FFkKXk5xwPpo_reQHW3U3Y_yGF991%3Fimageslim?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FkKXk5xwPpo_reQHW3U3Y_yGF991?imageslim"><noscript><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FkKXk5xwPpo_reQHW3U3Y_yGF991?imageslim"></noscript></div></div></div><p><!-- react-text: 6892 -->ä»£ç å¦‚ä¸‹ï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><!-- react-text: 6895 -->cosnt babel = <!-- /react-text --><span class="hljs-built_in">require</span><!-- react-text: 6897 -->(<!-- /react-text --><span class="hljs-string">'babel-core'</span><!-- react-text: 6899 -->)
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 6901 --> code = <!-- /react-text --><span class="hljs-string">`
import e from './where'
const [ a, b, c ] = [ 1, 2, 3 ]
`</span><!-- react-text: 6903 -->
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 6905 --> { ast } = babel.transform(code, { <!-- /react-text --><span class="hljs-attr">ast</span><!-- react-text: 6907 -->: <!-- /react-text --><span class="hljs-literal">true</span><!-- react-text: 6909 --> })

    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 6911 --> generate = <!-- /react-text --><span class="hljs-built_in">require</span><!-- react-text: 6913 -->(<!-- /react-text --><span class="hljs-string">'babel-generator'</span><!-- react-text: 6915 -->)
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 6917 --> { <!-- /react-text --><span class="hljs-attr">code</span><!-- react-text: 6919 -->: codeFromBabel } = generate(ast)<!-- /react-text --></code></pre></p><h3 id="ast"><a href="#ast" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 6923 -->AST<!-- /react-text --></h3><p><!-- react-text: 6925 -->ast åœ¨è¿™æ˜¯æŒ‡å°† JavaScript ä»£ç è¿›è¡Œè§£æå¾—åˆ°çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆæ•°æ®ç»“æ„ï¼‰ã€‚ å¦‚ä»£ç <!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 6929 --> key = <!-- /react-text --><span class="hljs-string">'value'</span></code></pre></p><p><!-- react-text: 6932 -->è§£æäº§ç”Ÿçš„ AST å¦‚ä¸‹å›¾æ‰€ç¤º <!-- /react-text --><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 426px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 114.554%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/http%3A%2F%2Fobu9je6ng.bkt.clouddn.com%2FFoe8OrdCEPOhQX4-VHbqkOtDruF9%3Fimageslim?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/Foe8OrdCEPOhQX4-VHbqkOtDruF9?imageslim"><noscript><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/Foe8OrdCEPOhQX4-VHbqkOtDruF9?imageslim"></noscript></div></div></div></p><p><!-- react-text: 6944 -->å»ºè®®ä½¿ç”¨ <!-- /react-text --><a href="http://astexplorer.net/#/Z1exs6BWMq">AST Explorer</a><!-- react-text: 6946 --> åœ¨çº¿é¢„è§ˆ AST<!-- /react-text --></p><h2 id="plugin-å’Œ-preset"><a href="#plugin-%E5%92%8C-preset" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 6950 -->Plugin å’Œ Preset<!-- /react-text --></h2><p><!-- react-text: 6952 -->æˆ‘ä»¬åœ¨ä½¿ç”¨ Babel çš„æ—¶å€™ï¼Œé€šå¸¸éœ€è¦é…ç½®ä¸€äº›é¢„è®¾ï¼ˆpresetsï¼‰å’Œæ’ä»¶ï¼ˆpluginsï¼‰ã€‚ å¦‚<!-- /react-text --><pre><code class="hljs language-json" data-query="{}" data-lang="json"><!-- react-text: 6955 -->{
    <!-- /react-text --><span class="hljs-attr">"presets"</span><!-- react-text: 6957 -->: [<!-- /react-text --><span class="hljs-string">"env"</span><!-- react-text: 6959 -->],
    <!-- /react-text --><span class="hljs-attr">"plugins"</span><!-- react-text: 6961 -->: [<!-- /react-text --><span class="hljs-string">"async-to-generator"</span><!-- react-text: 6963 -->]
}<!-- /react-text --></code></pre></p><p>å…¶å®ï¼Œpresetæ˜¯ä¸€å †pluginçš„ç»“åˆï¼Œé‚£ä¹ˆpluginåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å¦‚ä¸‹å›¾ï¼Œplugin ä¼šè½¬æ¢ ASTï¼Œå¯¹ AST è¿›è¡Œå¤„ç†ï¼Œä»è€Œä¹Ÿèƒ½å¤Ÿå½±å“åˆ°äº§ç”Ÿå‡ºæ¥çš„ JS Codeã€‚</p><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 489px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 23.3129%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/http%3A%2F%2Fobu9je6ng.bkt.clouddn.com%2FFmBuevqTrAt8VApb-bnWygS6cwrK%3Fimageslim?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmBuevqTrAt8VApb-bnWygS6cwrK?imageslim"><noscript><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmBuevqTrAt8VApb-bnWygS6cwrK?imageslim"></noscript></div></div></div><p>åœ¨åæ–‡ä¸­å­¦ä¹ äº†å¼€å‘ Babel æ’ä»¶åï¼Œå°†é˜è¿°ä¸€ä¸‹ Babel plugin å’Œ preset çš„æ‰§è¡Œè¿‡ç¨‹å’Œé¡ºåºã€‚</p><h2 id="å¼€å‘-babel-æ’ä»¶"><a href="#%E5%BC%80%E5%8F%91-babel-%E6%8F%92%E4%BB%B6" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 6979 -->å¼€å‘ Babel æ’ä»¶<!-- /react-text --></h2><p>äº†è§£äº† Babel æ’ä»¶çš„æ¦‚å¿µåï¼Œè®©æˆ‘ä»¬åŠ¨æ‰‹æ’¸ä¸€ä¸ª Babel æ’ä»¶å§ï¼</p><h3 id="æƒ…æ™¯å†ç°"><a href="#%E6%83%85%E6%99%AF%E5%86%8D%E7%8E%B0" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 6984 -->æƒ…æ™¯å†ç°<!-- /react-text --></h3><p><!-- react-text: 6986 -->åœ¨ä½¿ç”¨æ„å»ºå·¥å…· Webpack å¼€å‘å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½é€šå¸¸éœ€è¦ import ä¸€å¤§ä¸²ä¾èµ–<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span><!-- react-text: 6990 --> a <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 6992 --> <!-- /react-text --><span class="hljs-string">'a'</span><!-- react-text: 6994 -->
    <!-- /react-text --><span class="hljs-keyword">import</span><!-- react-text: 6996 --> b <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 6998 --> <!-- /react-text --><span class="hljs-string">'b'</span><!-- react-text: 7000 -->
    <!-- /react-text --><span class="hljs-keyword">import</span><!-- react-text: 7002 --> c <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 7004 --> <!-- /react-text --><span class="hljs-string">'c'</span><!-- react-text: 7006 -->
    <!-- /react-text --><span class="hljs-comment">// ...</span><!-- react-text: 7008 -->

    <!-- /react-text --><span class="hljs-comment">// code here</span></code></pre></p><p><!-- react-text: 7011 -->ä½†æ˜¯åœ¨å¼€å‘çš„é€»è¾‘ä¸­å¯èƒ½åªéœ€è¦ç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸¢ä¸¢ä¾èµ–ï¼Œæ¯”å¦‚ <!-- /react-text --><code>a</code><!-- react-text: 7013 -->ï¼Œé‚£ä¹ˆä¾èµ–<!-- /react-text --><code>b</code><!-- react-text: 7015 --> <!-- /react-text --><code>c</code><!-- react-text: 7017 --> éƒ½æ˜¯â€œæ— æ•ˆâ€çš„ä¾èµ–ã€‚<!-- /react-text --></p><p><strong>æ³¨æ„ï¼š</strong><!-- react-text: 7020 --> æ— æ•ˆåªæ˜¯ç›¸å¯¹è€Œè¨€çš„ï¼Œå› ä¸ºåœ¨ <!-- /react-text --><code>'b', 'c'</code><!-- react-text: 7022 --> ä¾èµ–ä¸­å¯èƒ½ä¼šæ‰§è¡Œä¸€äº›å‰¯ä½œç”¨çš„é€»è¾‘ã€‚å¦‚è®¾ç½®å…¨å±€å˜é‡ï¼Œç¯å¢ƒå˜é‡ï¼Œåšäº›åˆå§‹åŒ–å·¥ä½œ...<!-- /react-text --></p><p><!-- react-text: 7024 -->åœ¨ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå°±éœ€è¦è€ƒè™‘åˆ°å»é™¤æ‰æ— æ•ˆçš„ <!-- /react-text --><code>import</code><!-- react-text: 7026 --> è¯­å¥äº†ï¼Œè¿™æ ·å¯ä»¥ä¸€å®šç¨‹åº¦ä¸ŠåŠ å¿«ç¨‹åºæ‰§è¡Œé€Ÿåº¦ï¼Œç¼©å°æ‰“åŒ…å‡ºæ¥çš„ bundle å¤§å°ã€‚<!-- /react-text --></p><h3 id="å¼€å‘æ’ä»¶ï¼"><a href="#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6%EF%BC%81" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7030 -->å¼€å‘æ’ä»¶ï¼<!-- /react-text --></h3><p>ä¸æƒ³å·æ‡’çš„å¢¨é±¼ä¸æ˜¯å¥½ç¨‹åºå‘˜ï¼å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¼€å‘ Babel æ’ä»¶æ¥å®ç°ï¼Œå‡å°‘æˆ‘ä»¬çš„äººåŠ›å·¥ä½œé‡ã€‚</p><p><strong>ç¨‹åºæ€è·¯</strong><!-- react-text: 7034 --> 1. æ ¹æ® <!-- /react-text --><code>import ...</code><!-- react-text: 7036 --> è¯­æ³•ï¼Œå¾—åˆ° imported å˜é‡åé›†åˆ 2. è¿‡æ»¤æ‰ä½¿ç”¨è¿‡çš„ imported å˜é‡å 3. ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ <!-- /react-text --><code>import ...</code><!-- react-text: 7038 --> è¯­å¥<!-- /react-text --></p><p>æ€è·¯æ€»æ˜¯å¾ˆç®€å•ï¼Œä½†åªæœ‰çœŸæ­£å®ç°è¿‡çš„äººæ‰çŸ¥é“é‡Œé¢çš„å…·ä½“ç§ç§ã€‚</p><p>Babel æ’ä»¶è¿”å›ä¸€ä¸ª function ï¼Œå…¥å‚ä¸º babel å¯¹è±¡ï¼Œè¿”å› Objectã€‚</p><p><!-- react-text: 7042 -->å…¶ä¸­ <!-- /react-text --><code>pre</code><!-- react-text: 7044 -->, <!-- /react-text --><code>post</code><!-- react-text: 7046 --> åˆ†åˆ«åœ¨è¿›å…¥/ç¦»å¼€ AST çš„æ—¶å€™è§¦å‘ï¼Œæ‰€ä»¥ä¸€èˆ¬åˆ†åˆ«ç”¨æ¥åšåˆå§‹åŒ–/åˆ é™¤å¯¹è±¡çš„æ“ä½œ<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-built_in">module</span><!-- react-text: 7050 -->.exports = <!-- /react-text --><span class="hljs-function"><!-- react-text: 7052 -->(<!-- /react-text --><span class="hljs-params">babel</span><!-- react-text: 7054 -->) =&gt;<!-- /react-text --></span><!-- react-text: 7055 --> {
    <!-- /react-text --><span class="hljs-keyword">return</span><!-- react-text: 7057 --> {
    pre(path) {
    <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7059 -->.runtimeData = {}
    },
    <!-- /react-text --><span class="hljs-attr">visitor</span><!-- react-text: 7061 -->: {},
    post(path) {
    <!-- /react-text --><span class="hljs-keyword">delete</span><!-- react-text: 7063 --> <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7065 -->.runtimeData
    }
  }
}<!-- /react-text --></code></pre></p><p>ç„¶åæ˜¯ visitor è®¿é—®è€…å¯¹è±¡ã€‚</p><p><!-- react-text: 7068 -->å…ˆçœ‹ä¸ªç®€å•çš„ä¾‹å­ï¼š å¦‚éœ€è¦å°†å¦‚ä¸‹ä»£ç ä¸­çš„ x å˜é‡é‡å‘½åä¸º y<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 7072 --> x = <!-- /react-text --><span class="hljs-string">'x'</span><!-- react-text: 7074 -->
alert(x)<!-- /react-text --></code></pre></p><p><!-- react-text: 7076 -->visitor ä¹¦å†™ä¸ºï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 7080 --> visitor = {
  Identifier(path, data) {
    <!-- /react-text --><span class="hljs-keyword">if</span><!-- react-text: 7082 --> (path.node.name === <!-- /react-text --><span class="hljs-string">'x'</span><!-- react-text: 7084 -->) {
      path.node.name = <!-- /react-text --><span class="hljs-string">'y'</span><!-- react-text: 7086 -->
    }
  }
}<!-- /react-text --></code></pre></p><p><!-- react-text: 7088 -->è¾“å‡ºä¸ºï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 7092 --> y = <!-- /react-text --><span class="hljs-string">'x'</span><!-- react-text: 7094 -->
alert(y)<!-- /react-text --></code></pre></p><p><!-- react-text: 7096 -->å¯ä»¥çœ‹å‡ºï¼Œvisitor æ˜¯ Object ç±»å‹ï¼Œå…¶ä¸­çš„ key å¯¹åº” AST ä¸­çš„å„ä¸ªèŠ‚ç‚¹çš„ typeï¼Œ<!-- /react-text --><code>path.node</code><!-- react-text: 7098 --> æ˜¯ AST ä¸­çš„èŠ‚ç‚¹æ•°æ®ã€‚<!-- /react-text --></p><p>ç®€å•äº†è§£ visitor åï¼Œå¼€å§‹æˆ‘ä»¬çš„å¼€å‘å§ï¼</p><h4 id="å¾—åˆ°-imported-å˜é‡åé›†åˆ"><a href="#%E5%BE%97%E5%88%B0-imported-%E5%8F%98%E9%87%8F%E5%90%8D%E9%9B%86%E5%90%88" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7103 -->å¾—åˆ° imported å˜é‡åé›†åˆ<!-- /react-text --></h4><p><!-- react-text: 7105 -->æˆ‘ä»¬éœ€è¦å…³å¿ƒ <!-- /react-text --><code>import</code><!-- react-text: 7107 --> è¯­å¥æœ‰ï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span><!-- react-text: 7111 --> lodash <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 7113 --> <!-- /react-text --><span class="hljs-string">'loadsh'</span><!-- react-text: 7115 -->
    <!-- /react-text --><span class="hljs-keyword">import</span><!-- react-text: 7117 --> { extend, cloneDeep <!-- /react-text --><span class="hljs-keyword">as</span><!-- react-text: 7119 --> clone } <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 7121 --> <!-- /react-text --><span class="hljs-string">'lodash'</span></code></pre></p><p><!-- react-text: 7124 -->è€Œå¯¹äº <!-- /react-text --><code>import 'babel-polyfill'</code><!-- react-text: 7126 --> è¯­å¥ï¼Œåˆ™ä¸å…³å¿ƒã€‚<!-- /react-text --></p><p><!-- react-text: 7128 -->ä»¥ <!-- /react-text --><code>import { extend, cloneDeep as clone } from 'lodash'</code><!-- react-text: 7130 --> ä¸ºä¾‹ï¼Œå¾—åˆ°çš„ AST ä¸ºï¼š <!-- /react-text --><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 475px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 69.2632%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/http%3A%2F%2Fobu9je6ng.bkt.clouddn.com%2FFmoMJFEwtRgN9pPLZeQW2-wmuFC-%3Fimageslim?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmoMJFEwtRgN9pPLZeQW2-wmuFC-?imageslim"><noscript><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmoMJFEwtRgN9pPLZeQW2-wmuFC-?imageslim"></noscript></div></div></div></p><p><!-- react-text: 7142 -->å…¶ä¸­çš„æ•°ç»„ <!-- /react-text --><code>specifiers</code><!-- react-text: 7144 --> ä¸ºï¼š <!-- /react-text --><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 356px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 141.854%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/https%3A%2F%2Fi.loli.net%2F2017%2F11%2F30%2F5a201ece80d93.jpg?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="https://i.loli.net/2017/11/30/5a201ece80d93.jpg"><noscript><img class="medium-image-origin medium-zoom-image" src="https://i.loli.net/2017/11/30/5a201ece80d93.jpg"></noscript></div></div></div></p><p><!-- react-text: 7156 -->æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¾—åˆ° <!-- /react-text --><code>specifiers</code><!-- react-text: 7158 --> ä¸­çš„ <!-- /react-text --><code>local.name</code><!-- react-text: 7160 --> å³å¯ï¼Œå•ä¸ºäº†åç»­å¯¹è¯¥ AST ç»“ç‚¹è¿›è¡Œæ“ä½œ(åˆ é™¤)ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å­˜å‚¨ç»“ç‚¹ä¿¡æ¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span><!-- react-text: 7165 --> <!-- /react-text --><span class="hljs-title">getSpecifierIdentifiers</span><!-- react-text: 7167 -->(<!-- /react-text --><span class="hljs-params">specifiers = [], withPath = false</span><!-- react-text: 7169 -->) <!-- /react-text --></span><!-- react-text: 7170 -->{
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7172 --> collection = []
    <!-- /react-text --><span class="hljs-function"><span class="hljs-keyword">function</span><!-- react-text: 7175 --> <!-- /react-text --><span class="hljs-title">loop</span><!-- react-text: 7177 -->(<!-- /react-text --><span class="hljs-params">path, index</span><!-- react-text: 7179 -->) <!-- /react-text --></span><!-- react-text: 7180 -->{
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7182 --> node = path.node
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7184 --> item = { path, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7186 -->: node.local.name }
    <!-- /react-text --><span class="hljs-keyword">switch</span><!-- react-text: 7188 --> (node.type) {
    <!-- /react-text --><span class="hljs-keyword">case</span><!-- react-text: 7190 --> <!-- /react-text --><span class="hljs-string">'ImportDefaultSpecifier'</span><!-- react-text: 7192 -->:
    <!-- /react-text --><span class="hljs-keyword">case</span><!-- react-text: 7194 --> <!-- /react-text --><span class="hljs-string">'ImportSpecifier'</span><!-- react-text: 7196 -->:
        collection.push(item)
    <!-- /react-text --><span class="hljs-keyword">break</span><!-- react-text: 7198 -->;
    }
  }
  specifiers.forEach(loop)

    <!-- /react-text --><span class="hljs-keyword">return</span><!-- react-text: 7200 --> collection
}<!-- /react-text --></code></pre></p><p><!-- react-text: 7202 -->ä»¥ä¸Šä»£ç å°†è¿”å›<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><!-- react-text: 7205 -->[
  { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7207 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7209 -->: <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7211 --> },
  { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7213 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7215 -->: <!-- /react-text --><span class="hljs-string">'clone'</span><!-- react-text: 7217 --> }
]<!-- /react-text --></code></pre></p><p><!-- react-text: 7219 -->å¾—åˆ°è¯¥æ¡ <!-- /react-text --><code>import</code><!-- react-text: 7221 --> è¯­å¥çš„å¼•å…¥çš„å˜é‡æ•°ç»„åï¼Œè¿˜éœ€è¦å­˜å‚¨ä¸€ä»½ <!-- /react-text --><code>import</code><!-- react-text: 7223 --> è¯­å¥çš„ NodePathï¼Œä¸ºäº†åç»­æ“ä½œ(åˆ é™¤)<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><!-- react-text: 7226 -->{
    <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7228 -->: {
    <!-- /react-text --><span class="hljs-attr">parent</span><!-- react-text: 7230 -->: path, <!-- /react-text --><span class="hljs-comment">// `import` è¯­å¥çš„ NodePath</span><!-- react-text: 7232 -->
    children: [
      { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7234 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7236 -->: <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7238 --> },
      { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7240 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7242 -->: <!-- /react-text --><span class="hljs-string">'clone'</span><!-- react-text: 7244 --> }
    ],
    <!-- /react-text --><span class="hljs-attr">data</span><!-- react-text: 7246 -->: { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7248 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7250 -->: <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7252 --> }
  },
    <!-- /react-text --><span class="hljs-string">'clone'</span><!-- react-text: 7254 -->: {
    <!-- /react-text --><span class="hljs-attr">parent</span><!-- react-text: 7256 -->: path,
    <!-- /react-text --><span class="hljs-attr">children</span><!-- react-text: 7258 -->: [
      { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7260 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7262 -->: <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7264 --> },
      { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7266 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7268 -->: <!-- /react-text --><span class="hljs-string">'clone'</span><!-- react-text: 7270 --> }
    ],
    <!-- /react-text --><span class="hljs-attr">data</span><!-- react-text: 7272 -->: { <!-- /react-text --><span class="hljs-attr">path</span><!-- react-text: 7274 -->: NodePath, <!-- /react-text --><span class="hljs-attr">name</span><!-- react-text: 7276 -->: <!-- /react-text --><span class="hljs-string">'clone'</span><!-- react-text: 7278 --> }
  }
}<!-- /react-text --></code></pre></p><h4 id="å»é™¤ä½¿ç”¨è¿‡çš„-imported-å˜é‡å"><a href="#%E5%8E%BB%E9%99%A4%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84-imported-%E5%8F%98%E9%87%8F%E5%90%8D" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7282 -->å»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡å<!-- /react-text --></h4><p><!-- react-text: 7284 -->åœ¨å»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡åä¹‹å‰ï¼Œéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼š åœ¨ ES6 æ ‡å‡†ä¸­ï¼Œimport ä¸­å®šä¹‰çš„å˜é‡åæ˜¯ä¸èƒ½è¢«é‡æ–°å®šä¹‰çš„ï¼Œå¦‚ä¸‹ä»£ç æ˜¯ä¸è¢«å…è®¸çš„ã€‚<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span><!-- react-text: 7288 --> _ <!-- /react-text --><span class="hljs-keyword">from</span><!-- react-text: 7290 --> <!-- /react-text --><span class="hljs-string">'lodash'</span><!-- react-text: 7292 -->
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7294 --> _ = <!-- /react-text --><span class="hljs-string">'hello'</span></code></pre></p><p><!-- react-text: 7297 -->é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ <!-- /react-text --><code>extend</code><!-- react-text: 7299 --> æ˜¯è¢«ä½¿ç”¨çš„å‘¢ï¼Ÿ<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><!-- react-text: 7302 -->extend = <!-- /react-text --><span class="hljs-string">'extend'</span><!-- react-text: 7304 -->
[ extend ]
{ <!-- /react-text --><span class="hljs-attr">key</span><!-- react-text: 7306 -->: extend }
extend - <!-- /react-text --><span class="hljs-number">2</span><!-- react-text: 7308 -->
extend / <!-- /react-text --><span class="hljs-number">2</span><!-- react-text: 7310 -->
extend &gt; <!-- /react-text --><span class="hljs-number">2</span><!-- react-text: 7312 -->
extend &lt;= <!-- /react-text --><span class="hljs-number">2</span><!-- react-text: 7314 -->
extend[<!-- /react-text --><span class="hljs-string">'key'</span><!-- react-text: 7316 -->]()
extend.key = <!-- /react-text --><span class="hljs-number">233</span><!-- react-text: 7318 -->
extend.key &lt; <!-- /react-text --><span class="hljs-number">233</span><!-- react-text: 7320 -->
    <!-- /react-text --><span class="hljs-comment">// ...</span></code></pre></p><p><!-- react-text: 7323 -->æƒ…å†µå¤ªå¤šäº† ğŸ˜¢ æ—¢ç„¶æ­£é¢åˆ—ä¸¾è¢«ä½¿ç”¨çš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œé‚£ä½•ä¸é€†å‘æ€ç»´ï¼Œè€ƒè™‘ <!-- /react-text --><code>extend</code><!-- react-text: 7325 --> æ²¡è¢«ä½¿ç”¨çš„æƒ…å†µå‘¢ï¼Ÿ<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 7329 --> extend = <!-- /react-text --><span class="hljs-string">'value'</span><!-- react-text: 7331 -->
{ <!-- /react-text --><span class="hljs-attr">extend</span><!-- react-text: 7333 -->: <!-- /react-text --><span class="hljs-string">'value'</span><!-- react-text: 7335 --> }
ref.extend
    <!-- /react-text --><span class="hljs-class"><span class="hljs-keyword">class</span><!-- react-text: 7338 --> <!-- /react-text --><span class="hljs-title">A</span><!-- react-text: 7340 --> <!-- /react-text --></span><!-- react-text: 7341 -->{
  extend() {}
  extend = <!-- /react-text --><span class="hljs-number">233</span><!-- react-text: 7343 -->
}<!-- /react-text --></code></pre></p><p>æœç„¶æƒ…å†µå°±å¥½å¤šäº†å˜› ğŸ˜„</p><p>äºæ˜¯ï¼Œå»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡åä¹Ÿå¯ä»¥æ¬¢å¿«åœ°å®Œæˆå•¦ï¼</p><h4 id="ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„-import--è¯­å¥"><a href="#%E7%A7%BB%E9%99%A4%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84-import--%E8%AF%AD%E5%8F%A5" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7349 -->ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ <!-- /react-text --><code>import ...</code><!-- react-text: 7351 --> è¯­å¥<!-- /react-text --></h4><ol><li>éå†æœ€ç»ˆå¾—åˆ°çš„æ²¡æœ‰ä½¿ç”¨åˆ°å˜é‡é›†åˆ Aï¼›</li><li><!-- react-text: 7355 -->å¦‚æœ item ä¸­çš„ <!-- /react-text --><code>children</code><!-- react-text: 7357 --> ä¸­æ¯ä¸€ä¸ª <!-- /react-text --><code>name</code><!-- react-text: 7359 --> éƒ½å­˜åœ¨äº A ä¸­ï¼Œåˆ é™¤ <!-- /react-text --><code>item.parent</code><!-- react-text: 7361 --> ç»“ç‚¹ï¼Œå¦åˆ™åªåˆ é™¤ <!-- /react-text --><code>item.data.path</code><!-- react-text: 7363 --> ç»“ç‚¹ï¼›<!-- /react-text --></li></ol><h3 id="æ‰“å®Œæ”¶å·¥ï¼"><a href="#%E6%89%93%E5%AE%8C%E6%94%B6%E5%B7%A5%EF%BC%81" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7367 -->æ‰“å®Œæ”¶å·¥ï¼<!-- /react-text --></h3><p><!-- react-text: 7369 -->å®Œæˆäº†ä¸Šé¢ä¸€ç³»åˆ—çš„åˆ†æåï¼Œå¾—åˆ°çš„æœ€ç»ˆæ’ä»¶ä»£ç å¤§æ¦‚è¿™ä¸ªæ ·å­ï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-built_in">module</span><!-- react-text: 7373 -->.exports = {
  pre() {
    <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7375 -->.runtimeData = {}
  }
  visitor: {
    ImportDeclaration(path, data) {
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7377 --> locals = getSpecImport(path);
    <!-- /react-text --><span class="hljs-keyword">if</span><!-- react-text: 7379 --> (locals) {
          locals.forEach(<!-- /react-text --><span class="hljs-function"><!-- react-text: 7381 -->(<!-- /react-text --><span class="hljs-params">pathData, index, all</span><!-- react-text: 7383 -->) =&gt;<!-- /react-text --></span><!-- react-text: 7384 --> {
    <!-- /react-text --><span class="hljs-keyword">const</span><!-- react-text: 7386 --> {name} = pathData
    <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7388 -->.runtimeData[name] = {
    <!-- /react-text --><span class="hljs-attr">parent</span><!-- react-text: 7390 -->: path,
    <!-- /react-text --><span class="hljs-attr">children</span><!-- react-text: 7392 -->: all,
    <!-- /react-text --><span class="hljs-attr">data</span><!-- react-text: 7394 -->: pathData
          }
        })
    <!-- /react-text --><span class="hljs-comment">// è·³è¿‡å½“å‰pathçš„å­èŠ‚ç‚¹çš„å‘ä¸‹éå†</span><!-- react-text: 7396 -->
    <!-- /react-text --><span class="hljs-comment">// ä¸ºäº†é˜²æ­¢éå† import è¯­å¥ä¸­çš„ Identifier</span><!-- react-text: 7398 -->
        path.skip()
      }
    },
    Identifier() {
    <!-- /react-text --><span class="hljs-comment">// ä¹¦å†™æ­¥éª¤2é€»è¾‘ï¼Œåˆ é™¤ä½¿ç”¨è¿‡çš„Identifier</span><!-- react-text: 7400 -->
    },
    JSXIdentifier() {
    <!-- /react-text --><span class="hljs-comment">// ä¹¦å†™æ­¥éª¤2é€»è¾‘ï¼Œåˆ é™¤ä½¿ç”¨è¿‡çš„Identifier</span><!-- react-text: 7402 -->
    }
  },
  post() {
    <!-- /react-text --><span class="hljs-comment">// ä¹¦å†™æ­¥éª¤3é€»è¾‘</span><!-- react-text: 7404 -->
    <!-- /react-text --><span class="hljs-keyword">delete</span><!-- react-text: 7406 --> <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7408 -->.runtimeData
  }
}<!-- /react-text --></code></pre></p><p><!-- react-text: 7410 -->ä»¥ä¸Šä»£ç å’‹çœ‹ä¸€ä¸‹é€»è¾‘çš„ç¡®æ²¡é—®é¢˜ã€‚ <!-- /react-text --><strong>ä½†æ˜¯ï¼</strong><!-- react-text: 7412 -->æ­é…<!-- /react-text --><code>preset-es2015</code><!-- react-text: 7414 -->ä½¿ç”¨æ—¶ï¼Œå°†ä¼šä¸èƒ½æ­£ç¡®åˆ é™¤æœªä½¿ç”¨çš„å˜é‡åæˆ–è€… import è¯­å¥ã€‚ æŠ¥é”™ï¼š<!-- /react-text --><code>NodePath has been removed so is read-only.</code><!-- react-text: 7416 --> å› ä¸º es2015 ä¸­ä¼šå°† import è¯­å¥è¿›è¡Œæ›¿æ¢ï¼Œç›¸å½“äºå­˜å‚¨çš„ NodePath å·²ç»è¢«åˆ é™¤äº†ã€‚<!-- /react-text --></p><p><!-- react-text: 7418 -->å…³äºBabelä¸­pluginå’Œpresetçš„æ‰§è¡Œé¡ºåºï¼Œå®˜æ–¹çš„è§£é‡Šå¦‚ä¸‹ï¼š<!-- /react-text --><blockquote><p>Plugins run before Presets. Plugin ordering is first to last. Preset ordering is reversed (last to first).</p></blockquote></p><p>æ—¢ç„¶ Plugins run before Presetsï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ä¸Šè¯‰çš„é—®é¢˜å‘¢ï¼Ÿ</p><p><!-- react-text: 7423 -->Babelçš„æ ¸å¿ƒå¼€å‘äººå‘˜ @hzoo åšå‡ºä¸‹åˆ—è§£é‡Š:<!-- /react-text --><blockquote><p>Plugins do go before presets, but it just adds the same visitors first before merging them.</p></blockquote></p><p>æ„æ€æ˜¯ï¼ŒBabel åœ¨å¤„ç† plugins çš„æ—¶å€™ï¼Œä¼šå°† visitor é‡Œé¢å„ä¸ªå¯¹åº”çš„å•å…ƒç»Ÿä¸€åˆå¹¶ï¼Œç„¶åå†æŒ‰ç…§æ’ä»¶çš„é¡ºåºå»æ‰§è¡Œã€‚</p><div><style>
    .medium-image-progressive-container {
      position: relative;
      width: 100%;
      margin: 0 auto;
      margin-top: 43px;
      display: block;
    }
    .image-loaded.medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
      transition: visibility 0s linear .5s,opacity .1s .4s;
    }
    .image-loaded.medium-image-progressive .medium-image-origin {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .medium-image-progressive-container .medium-image-progressive {
      position: absolute;
      top:0;left:0;width:100%;height:100%;
      max-width: 100%;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }
    .medium-image-progressive-container img, .medium-image-progressive-container canvas {
      margin: 0 auto;
    }
    .medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
      visibility: visible;
      opacity: 1;
      -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
      transition: visibility 0s linear 0s,opacity .4s 0s;
    }
    .medium-image-progressive-container .medium-image-origin,
    .medium-image-progressive-container .medium-image-progressive canvas {
      visibility: hidden;
      opacity: 0;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style><div class="medium-image-progressive-container" style="max-width: 501px;"><div class="medium-image-progressive-placeholder" style="padding-bottom: 27.7445%;"></div><div class="medium-image-progressive image-loaded"><canvas></canvas><img class="medium-image-progress medium-zoom-image" src="http://23.106.151.229:8000/resize/http%3A%2F%2Fobu9je6ng.bkt.clouddn.com%2FFmNs17OZT1JSki4bVtVQ0Tepxk5P%3Fimageslim?s=0.1" style="display: none;"><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmNs17OZT1JSki4bVtVQ0Tepxk5P?imageslim"><noscript><img class="medium-image-origin medium-zoom-image" src="http://obu9je6ng.bkt.clouddn.com/FmNs17OZT1JSki4bVtVQ0Tepxk5P?imageslim"></noscript></div></div></div><p>æ‰€ä»¥åœ¨æ‰§è¡Œåˆ° post() æ–¹æ³•æ—¶ï¼Œå…¶å®es2015ä¸­çš„æ’ä»¶å·²ç»å°† import è¯­å¥æ›¿æ¢äº† ğŸ˜¢</p><p>é‚£ä¹ˆè¯¥é—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ å¯ä»¥ AST æœ€å¤–å±‚çš„ Program ç»“ç‚¹éå† pathï¼Œé€»è¾‘åŒä¸Šã€‚</p><p><!-- react-text: 7440 -->æœ€ç»ˆä»£ç ä¸ºï¼š<!-- /react-text --><pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">const</span><!-- react-text: 7444 --> traverseObject = {
  ImportDeclaration(path, data) {
    <!-- /react-text --><span class="hljs-comment">// ...</span><!-- react-text: 7446 -->
  },
  Identifier() {
    <!-- /react-text --><span class="hljs-comment">// ...</span><!-- react-text: 7448 -->
  },
  JSXIdentifier() {
    <!-- /react-text --><span class="hljs-comment">// ...</span><!-- react-text: 7450 -->
  }
}

    <!-- /react-text --><span class="hljs-built_in">module</span><!-- react-text: 7452 -->.exports = <!-- /react-text --><span class="hljs-function"><span class="hljs-keyword">function</span><!-- react-text: 7455 --> (<!-- /react-text --><span class="hljs-params">babel</span><!-- react-text: 7457 -->) <!-- /react-text --></span><!-- react-text: 7458 -->{
    <!-- /react-text --><span class="hljs-keyword">return</span><!-- react-text: 7460 --> {
    pre(path) {
    <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7462 -->.runtimeData = {}
    },
    <!-- /react-text --><span class="hljs-attr">visitor</span><!-- react-text: 7464 -->: {
      Program(path, data) {
    <!-- /react-text --><span class="hljs-comment">// åœ¨æœ€å¤–å±‚çš„ Program éå† path</span><!-- react-text: 7466 -->
        path.traverse(traverseObject, {
    <!-- /react-text --><span class="hljs-attr">runtimeData</span><!-- react-text: 7468 -->: <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7470 -->.runtimeData
        })
        handleRemovePath(<!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7472 -->.runtimeData)
      }
    },
    post() {
    <!-- /react-text --><span class="hljs-keyword">delete</span><!-- react-text: 7474 --> <!-- /react-text --><span class="hljs-keyword">this</span><!-- react-text: 7476 -->.runtimeData
    }
  }
}<!-- /react-text --></code></pre></p><p><!-- react-text: 7478 -->æºç ï¼š<!-- /react-text --><a href="https://github.com/imcuttle/babel-plugin-danger-remove-unused-import">GitHub +1</a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true"><span class="icon icon-link"></span></a><!-- react-text: 7483 -->å‚è€ƒèµ„æ–™<!-- /react-text --></h2><ul><li><a href="https://github.com/babel/babel/issues/5623">Discussion: Fix Plugin Ordering #5623</a></li><li><a href="https://github.com/thejameskyle/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md">babel handbook</a></li></ul></article><div><div class="valine-comment-container valine"><div class="vwrap"><div class="vheader item3"><input name="nick" placeholder="æ˜µç§°" class="vnick vinput" type="text"><input name="mail" placeholder="é‚®ç®±" class="vmail vinput" type="email"><input name="link" placeholder="ç½‘å€(http://)" class="vlink vinput" type="text"></div><div class="vedit"><textarea class="veditor vinput" placeholder="just go go"></textarea></div><div class="vcontrol"><div class="col col-60" title="MarkDown is Support"><a href="https://segmentfault.com/markdown" target="_blank">MarkDown</a> is Support<label for="argee" style="display:none;"><input type="checkbox" id="argee">I'm not a Robot!</label></div><div class="col col-40 text-right"><button type="button" title="Cmd|Ctrl+Enter" class="vsubmit vbtn">å›å¤</button></div></div><div style="display:none;" class="vmark"></div></div><div class="vinfo" style="display:none;"><div class="vcount col"></div></div><ul class="vlist"></ul><div class="vempty" style="display:block;">è¿˜æ²¡æœ‰è¯„è®ºå“¦ï¼Œå¿«æ¥æŠ¢æ²™å‘å§~</div><div class="vpage txt-center"></div><div class="info"><div class="power txt-right">Powered By <a href="https://valine.js.org" target="_blank">Valine</a><br>v1.1.8-rc3</div></div></div></div><nav class="single-bar clearfix"><span class="prev"><a rel="prev" href="/blog/fe/es6-å¯¹unicodeçš„æ”¯æŒå°ç»“"><em class="eux-icon eux-icon-page-prev"></em><!-- react-text: 7495 -->ES6 å¯¹unicodeçš„æ”¯æŒ<!-- /react-text --></a></span><span class="next"><a rel="next" href="/blog/fe/832"><em class="eux-icon eux-icon-page-next"></em><!-- react-text: 7499 -->WebGL åŸºç¡€çŸ¥è¯†<!-- /react-text --></a></span></nav></div>
</div>
</body>
</html>
